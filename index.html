<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SOS Mechanics Booking</title>
<style>
/* Mobile-first + golden ratio styling */
body { font-family: Arial, sans-serif; max-width: 600px; margin:0 auto; padding:16px; line-height:1.618; font-size:1rem; }
h2 { font-size:1.618rem; text-align:center; margin-bottom:16px; }
form input, form select, form textarea, form button { width:100%; padding:10px; margin-bottom:16px; font-size:1rem; border-radius:6px; border:1px solid #ccc; box-sizing:border-box; }
button { font-weight:bold; cursor:pointer; }
#callbackBtn { background-color:#FF9800; color:#fff; border:none; }
a { display:block; text-align:center; margin-top:16px; padding:10px; background-color:#25D366; color:#fff; text-decoration:none; border-radius:6px; }
p { margin-bottom:16px; }
@media (max-width:480px){ body{padding:12px;} h2{font-size:1.414rem;} form input,form select,form textarea,form button{font-size:0.95rem;} }
</style>
</head>
<body>

<h2>SOS Mechanics â€“ Book a Service</h2>

<form id="bookingForm">
  <input type="text" name="name" placeholder="Your name" required><br>
  <input type="text" name="phone" placeholder="Phone number" required><br>
  <input type="text" name="address" placeholder="Address / Postcode" required><br>

  <p style="color:#555; font-style:italic;">Have you already ordered a part from motor factors? We can fit it for you during your booking!</p>
  <label><input type="checkbox" name="ownPart" value="Yes"> I have my own part</label><br>

  <select name="service" required>
    <option value="">Choose a service</option>
    <option>Starter Motor Replacement â€“ from Â£120</option>
    <option>Alternator Replacement â€“ from Â£140</option>
    <option>Battery Test & Replacement â€“ from Â£60</option>
    <option>Brake Pads & Discs â€“ from Â£100</option>
    <option>Full Service (Oil + Filters) â€“ from Â£180</option>
    <option>Diagnostic Scan â€“ Â£40</option>
    <option>Clutch Replacement â€“ from Â£350</option>
    <option>Fuel Filter Change â€“ from Â£70</option>
    <option>Emergency Callout â€“ from Â£50</option>
  </select><br>

  <textarea name="details" placeholder="Extra details..."></textarea><br>
  <button type="submit">Book Now</button>
</form>

<p style="text-align:center;">
  <a href="https://wa.me/447405937104?text=Hi,+I+need+to+book+a+mechanic+service" target="_blank">ðŸ’¬ Chat on WhatsApp</a>
</p>

<p style="text-align:center;">
  <button id="callbackBtn">ðŸ“ž Request Callback</button>
</p>

<script>
const BOT_TOKEN = "8353819114:AAF09ELwy_MbfzBaPS_grV5EOhvlQsyqndQ";
const CHAT_ID = 7527365740;
const URL = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;

function generateJobId(){ return Date.now(); }

document.getElementById("bookingForm").addEventListener("submit", function(e){
  e.preventDefault();
  const fd = new FormData(e.target);
  const jobId = generateJobId();

  const msg = `
ðŸŽŸï¸ *SOS Mechanics Ticket*
â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Job ID: ${jobId}
ðŸ‘¤ Name: ${fd.get("name")}
ðŸ“ž Phone: ${fd.get("phone")}
ðŸ“ Address: ${fd.get("address")}
ðŸ”§ Service: ${fd.get("service")}
ðŸ›  Own Part: ${fd.get("ownPart") || "No"}
ðŸ“ Notes: ${fd.get("details")}
â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ðŸ“ [View on Google Maps](https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(fd.get("address"))})
â° Time: ${new Date().toLocaleString()}
`;

  fetch(URL,{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({
      chat_id: CHAT_ID,
      text: msg,
      parse_mode:"Markdown",
      reply_markup:{
        inline_keyboard:[
          [{text:"âœ… Accept",callback_data:"accept"},{text:"âŒ Reject",callback_data:"reject"}],
          [{text:"ðŸ”§ In Progress",callback_data:"in_progress"},{text:"âœ… Completed",callback_data:"completed"}],
          [{text:"ðŸ“ Add Note",callback_data:`add_note_${jobId}`}]
        ]
      }
    })
  }).then(()=>alert("Booking sent!"));
});

document.getElementById("callbackBtn").addEventListener("click", function(){
  const phone = prompt("Enter your phone number for callback:");
  if(!phone) return;
  const jobId = generateJobId();

  const msg = `
ðŸŽŸï¸ *SOS Mechanics Callback Request*
â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Job ID: ${jobId}
ðŸ“ž Phone: ${phone}
â° Time: ${new Date().toLocaleString()}
`;

  fetch(URL,{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({
      chat_id: CHAT_ID,
      text: msg,
      parse_mode:"Markdown",
      reply_markup:{
        inline_keyboard:[
          [{text:"âœ… Accept",callback_data:"accept_callback"},{text:"âŒ Reject",callback_data:"reject_callback"}],
          [{text:"ðŸ”§ In Progress",callback_data:"in_progress"},{text:"âœ… Completed",callback_data:"completed"}],
          [{text:"ðŸ“ Add Note",callback_data:`add_note_${jobId}`}]
        ]
      }
    })
  }).then(()=>alert("Callback request sent!"));
});
</script>
</body>
</html>